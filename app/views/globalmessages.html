<div class="container">
  <div class="row">
    <div class="col-md-12 main">
      <h1 class="page-header">Global messages</h1>
      <div class="row">
        <div class="col-md-8">
          <table class="table">
            <thead>
              <tr>
                <th class="hide">Id</th>
                <th>Message</th>
                <th>prod</th>
                <th>created</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="elt in elts">
                <td class="hide">{{elt.id}}</td>
                <td>
                  <div class="alert alert-{{elt.display}}" style="max-width: 384px;">
                    <span ng-bind-html="trust(elt.content)"></span>
                  </div>
                </td>
                <td>{{elt.isProd}}</td>
                <td>{{elt.added | date}}</td>
                <td>
                  <button type="button" class="btn btn-xs btn-info" ng-click="edit(elt)"><i class="fa fa-pencil-square-o"></i></button>
                  <button type="button" class="btn btn-xs btn-danger" ng-click="remove(elt)"><i class="fa fa-times"></i></button>
                  <a class="btn btn-xs btn-default" href="{{restUrl(elt)}}" target="_blank"><i class="fa fa-external-link"></i></a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="col-md-4">
          <form name="food" ng-submit="save()">
            <div class="form-group">
              <label for="type">Type</label>
              <select id="type" name="type" class="form-control" ng-model="form.type" ng-options="type for type in messageTypes" required>
                <option value="">--</option>
              </select>
            </div>
            <div class="form-group">
              <label for="display">Type d'affichage</label>
              <select id="display" name="display" class="form-control" ng-model="form.display" ng-options="display for display in displayTypes" required>
                <option value="">--</option>
              </select>
            </div>
            <div class="form-group">
              <label for="content">Content</label>
              <textarea id="content" name="content" class="form-control" rows="5" ng-model="form.content" placeholder="Ex:bonjour :)" required></textarea>
            </div>
            <div class="form-group">
              <label for="shouldDisplay">Display message</label>
              <textarea id="shouldDisplay" name="shouldDisplay" class="form-control" rows="5" ng-model="form.shouldDisplay" required></textarea>
            </div>
            <div class="form-group">
              <label for="exec">Execute</label>
              <textarea id="exec" name="exec" class="form-control" rows="5" ng-model="form.exec" required></textarea>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="isProd" ng-model="form.isProd"> send in prod
              </label>
            </div>
            <div class="form-group">
              <label for="targets">Type</label>
              <select id="targets" name="targets" class="form-control" ng-model="form.targets" ng-options="v for v in appVersions" ng-multiple="true" multiple required>
                <option value="">--</option>
              </select>
            </div>

            <div class="form-group" ng-if="form.content">
              <label>Preview</label>
              <div class="form-control-static">
                <div class="alert alert-{{form.display}}" style="max-width: 384px;">
                  <button type="button" class="close">&times;</button>
                  <span ng-bind-html="trust(form.content)"></span>
                </div>
              </div>
            </div>

            <a class="btn btn-default" ng-click="cancel()">Annuler</a>
            <button type="submit" class="btn btn-primary" ng-if="!form.id">Cr√©er</button>
            <button type="submit" class="btn btn-success" ng-if="form.id">Enregistrer</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>