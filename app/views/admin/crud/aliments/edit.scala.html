@(pageTitle: String, id: Option[String], alimentForm: Form[models.Aliment], categories: Seq[(String, String)], rarities: List[String], currencyValues: List[String], unitValues: List[String])

@import helper._
@import helpers.bs3Tmpl.form._

@priceForm(priceField: Field) = {
	<div class="form-inline field-elt">
		@bs3Number(priceField("amount"), label="Amount", inline=true)
		@bs3Select(priceField("currency"), label="Currency", options=options(currencyValues), inline=true)
		<div class="form-group"><span class="form-control text">/</span></div> 
		@bs3Select(priceField("unit"), label="Unit", options=options(unitValues), inline=true)
		@bs3Text(priceField("source"), label="Source", inline=true)
		<div class="form-group">
			<button class="btn btn-danger field-remove"><span class="glyphicon glyphicon-minus"></span></button>
		</div>
	</div>
}

@admin.main(pageTitle, "crud") {
	<div class="row">
		<div class="col-md-12 card-black">
			<h2>@if(!id.isDefined) { Create new } else { Edit } aliment</h2>
			@helper.form(if(!id.isDefined) crud.routes.Aliments.create else crud.routes.Aliments.update(id.get), 'class -> "form-horizontal") {
				@bs3Hidden(alimentForm("id"))
				@bs3Text(alimentForm("name"), label="Name", horizontal=true)
				@bs3Text(alimentForm("category")("id"), label="Category Id", horizontal=true)
				@bs3Text(alimentForm("category")("name"), label="Category Name", horizontal=true)
				@*@bs3Select(alimentForm("category"), label="Category", options=categories, horizontal=true)*@
				@bs3Select(alimentForm("rarity"), label="Rarity", options=options(rarities), horizontal=true)
				<div class="form-group">
					<label class="control-label col-md-2">Prices</label>
					<div class="col-md-10 repeated-field">
						<div class="field-template">@priceForm(alimentForm("prices[x]"))</div>
						@helper.repeat(alimentForm("prices"), min=0) { priceField =>
							@priceForm(priceField)
						}
						<button class="btn btn-success field-add"><span class="glyphicon glyphicon-plus"></span></button>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
			            <a href="@crud.routes.Aliments.index" class="btn btn-default">@if(!id.isDefined) { Cancel } else { Return }</a>
			            <button type="submit" class="btn btn-primary">@if(!id.isDefined) { Create } else { Update } aliment</button>
					</div>
		        </div>
			}
		</div>
	</div>
}