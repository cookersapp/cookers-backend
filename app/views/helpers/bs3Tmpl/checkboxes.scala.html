@(field: Field, options: Seq[(String, String)], label: String = "", help: String = "", horizontal: Boolean = false, inline: Boolean = false)

@fieldInput(field: Field, options: Seq[(String, String)], values: Set[String]) = {
	@for((value, label) <- options) {
		<label class="checkbox-inline">
			<input type="checkbox" name="@field.name" id="@value" value="@value" @if(values.contains(value)) {checked}>
			@label
		</label>
	}
}
@fieldHelpers(field: Field, help: String) = {
	<span class="help-block">@help</span>
	@if(field.hasErrors) {
		<span class="help-block">@{field.errors.map { error => Messages(error.message, error.args: _*) }}</span>
	} else {
		<span class="help-block">@{field.constraints.map { constraint => Messages(constraint._1, constraint._2) }}</span>
	}
}

@defining(if(label.length > 0) label else field.name) { _label =>
	@defining(if(field.indexes.isEmpty) field.value.toSet else field.indexes.map( i => field("[%s]".format(i)).value ).flatten.toSet){ values =>
		@if(horizontal && !inline){
			<div class="form-group @if(field.hasErrors) {has-error}">
				<label for="@field.id" class="control-label col-sm-2">@_label</label>
				<div class="col-sm-10">
					@fieldInput(field, options, values)
					@fieldHelpers(field, help)
				</div>
			</div>
		} else {
			<div class="form-group @if(field.hasErrors) {has-error}">
				<label for="@field.id" class="control-label @if(inline) {sr-only}" @if(!inline){style="display: block;"}>@_label</label>
				@fieldInput(field, options, values)
				@fieldHelpers(field, help)
			</div>
		}
	}
}
